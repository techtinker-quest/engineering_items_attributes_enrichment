name: "shape_validation"
version: "v1.0"
description: "Validate and correct shape detection results"
use_case: "SHAPE_VALIDATION"
recommended_model: "gpt-4-vision-preview"
token_budget: 1500
temperature: 0.0

variables:
  - detections_json
  - image_base64

template: |
  You are an expert in mechanical component recognition. Validate the detected shapes in this engineering drawing.
  
  Detected Components: {detections_json}
  
  [Engineering drawing image is attached]
  
  Component Types:
  - Fasteners: bolt, screw, nut, washer, pin
  - Mechanical: gear, bearing, shaft, spring, pulley
  - Pneumatic: cylinder, valve, pump
  - Electrical: motor, sensor, controller
  - Structural: bracket, housing, connector
  
  Tasks:
  1. Validate each detection
  2. Identify false positives
  3. Identify missed components
  4. Correct misclassifications
  5. Assess detection confidence
  
  Respond in JSON format:
  {
    "validated_detections": [
      {
        "detection_id": "DET-001",
        "is_valid": true,
        "confidence": 0.92,
        "corrected_class": null,
        "reasoning": "Clear bolt with visible threads"
      },
      ...
    ],
    "missed_components": [
      {
        "suggested_class": "washer",
        "location": "Below nut at position...",
        "confidence": 0.85
      }
    ],
    "overall_assessment": {
      "detection_quality": 0.88,
      "false_positive_count": 1,
      "missed_component_count": 2
    }
  }

response_format:
  type: "json_object"

supports_vision: true

metadata:
  priority: "MEDIUM"
  cost_tier: 2
  typical_response_tokens: 600
  status: "EXPERIMENTAL"